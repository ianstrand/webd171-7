{"ast":null,"code":"import _classCallCheck from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/src/containers/Search/Search.js\";\nimport React from 'react';\nimport './Search.scss';\nimport { getYoutubeLibraryLoaded } from '../../store/reducers/api';\nimport { getSearchNextPageToken, getSearchResults } from '../../store/reducers/search';\nimport * as searchActions from '../../store/actions/search';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { getSearchParam } from '../../services/url';\nimport { VideoList } from '../../components/VideoList/VideoList';\nimport { withRouter } from 'react-router-dom';\n\nvar Search = /*#__PURE__*/function (_React$Component) {\n  _inherits(Search, _React$Component);\n\n  var _super = _createSuper(Search);\n\n  function Search() {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.bottomReachedCallback = function () {\n      if (_this.props.nextPageToken) {\n        _this.props.searchForVideos(_this.getSearchQuery(), _this.props.nextPageToken, 25);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(VideoList, {\n        bottomReachedCallback: this.bottomReachedCallback,\n        showLoader: true,\n        videos: this.props.searchResults,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 13\n        }\n      });\n    }\n  }, {\n    key: \"getSearchQuery\",\n    value: function getSearchQuery() {\n      return getSearchParam(this.props.location, 'search_query');\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.getSearchQuery()) {\n        // redirect to home component if search query is not there\n        this.props.history.push('/');\n      }\n\n      this.searchForVideos();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.youtubeApiLoaded !== this.props.youtubeApiLoaded) {\n        this.searchForVideos();\n      }\n    }\n  }, {\n    key: \"searchForVideos\",\n    value: function searchForVideos() {\n      var searchQuery = this.getSearchQuery();\n\n      if (this.props.youtubeApiLoaded) {\n        this.props.searchForVideos(searchQuery);\n      }\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nfunction mapDispatchToProps(dispatch) {\n  var searchForVideos = searchActions.forVideos.request;\n  return bindActionCreators({\n    searchForVideos\n  }, dispatch);\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    youtubeApiLoaded: getYoutubeLibraryLoaded(state),\n    searchResults: getSearchResults(state, props.location.search),\n    nextPageToken: getSearchNextPageToken(state, props.location.search)\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));","map":{"version":3,"sources":["/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/src/containers/Search/Search.js"],"names":["React","getYoutubeLibraryLoaded","getSearchNextPageToken","getSearchResults","searchActions","bindActionCreators","connect","getSearchParam","VideoList","withRouter","Search","bottomReachedCallback","props","nextPageToken","searchForVideos","getSearchQuery","searchResults","location","history","push","prevProps","youtubeApiLoaded","searchQuery","Component","mapDispatchToProps","dispatch","forVideos","request","mapStateToProps","state","search"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,eAAP;AACA,SAAQC,uBAAR,QAAsC,0BAAtC;AACA,SAAQC,sBAAR,EAAgCC,gBAAhC,QAAuD,6BAAvD;AACA,OAAO,KAAKC,aAAZ,MAA+B,4BAA/B;AACA,SAAQC,kBAAR,QAAiC,OAAjC;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,cAAR,QAA6B,oBAA7B;AACA,SAAQC,SAAR,QAAwB,sCAAxB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;;IAEMC,M;;;;;;;;;;;;;;;;UAiCJC,qB,GAAwB,YAAM;AAC5B,UAAG,MAAKC,KAAL,CAAWC,aAAd,EAA6B;AAC3B,cAAKD,KAAL,CAAWE,eAAX,CAA2B,MAAKC,cAAL,EAA3B,EAAkD,MAAKH,KAAL,CAAWC,aAA7D,EAA4E,EAA5E;AACD;AACF,K;;;;;;;6BApCQ;AACP,0BAAQ,oBAAC,SAAD;AACN,QAAA,qBAAqB,EAAE,KAAKF,qBADtB;AAEN,QAAA,UAAU,EAAE,IAFN;AAGN,QAAA,MAAM,EAAE,KAAKC,KAAL,CAAWI,aAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AAID;;;qCAEgB;AACf,aAAOT,cAAc,CAAC,KAAKK,KAAL,CAAWK,QAAZ,EAAsB,cAAtB,CAArB;AACD;;;wCAEmB;AAClB,UAAI,CAAC,KAAKF,cAAL,EAAL,EAA4B;AAC1B;AACA,aAAKH,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;;AACD,WAAKL,eAAL;AACD;;;uCAEkBM,S,EAAW;AAC5B,UAAIA,SAAS,CAACC,gBAAV,KAA+B,KAAKT,KAAL,CAAWS,gBAA9C,EAAgE;AAC9D,aAAKP,eAAL;AACD;AACF;;;sCAEiB;AAChB,UAAMQ,WAAW,GAAG,KAAKP,cAAL,EAApB;;AACA,UAAI,KAAKH,KAAL,CAAWS,gBAAf,EAAiC;AAC/B,aAAKT,KAAL,CAAWE,eAAX,CAA2BQ,WAA3B;AACD;AACF;;;;EA/BkBtB,KAAK,CAACuB,S;;AA0C3B,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AACpC,MAAMX,eAAe,GAAGV,aAAa,CAACsB,SAAd,CAAwBC,OAAhD;AACA,SAAOtB,kBAAkB,CAAC;AAACS,IAAAA;AAAD,GAAD,EAAoBW,QAApB,CAAzB;AACD;;AAED,SAASG,eAAT,CAAyBC,KAAzB,EAAgCjB,KAAhC,EAAuC;AACrC,SAAO;AACLS,IAAAA,gBAAgB,EAAEpB,uBAAuB,CAAC4B,KAAD,CADpC;AAELb,IAAAA,aAAa,EAAEb,gBAAgB,CAAC0B,KAAD,EAAQjB,KAAK,CAACK,QAAN,CAAea,MAAvB,CAF1B;AAGLjB,IAAAA,aAAa,EAAEX,sBAAsB,CAAC2B,KAAD,EAAQjB,KAAK,CAACK,QAAN,CAAea,MAAvB;AAHhC,GAAP;AAKD;;AAED,eAAerB,UAAU,CAACH,OAAO,CAACsB,eAAD,EAAkBJ,kBAAlB,CAAP,CAA6Cd,MAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport './Search.scss';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {getSearchNextPageToken, getSearchResults} from '../../store/reducers/search';\nimport * as searchActions from '../../store/actions/search';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {getSearchParam} from '../../services/url';\nimport {VideoList} from '../../components/VideoList/VideoList';\nimport {withRouter} from 'react-router-dom';\n\nclass Search extends React.Component {\n  render() {\n    return (<VideoList\n      bottomReachedCallback={this.bottomReachedCallback}\n      showLoader={true}\n      videos={this.props.searchResults}/>);\n  }\n\n  getSearchQuery() {\n    return getSearchParam(this.props.location, 'search_query');\n  }\n\n  componentDidMount() {\n    if (!this.getSearchQuery()) {\n      // redirect to home component if search query is not there\n      this.props.history.push('/');\n    }\n    this.searchForVideos();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.youtubeApiLoaded !== this.props.youtubeApiLoaded) {\n      this.searchForVideos();\n    }\n  }\n\n  searchForVideos() {\n    const searchQuery = this.getSearchQuery();\n    if (this.props.youtubeApiLoaded) {\n      this.props.searchForVideos(searchQuery);\n    }\n  }\n\n  bottomReachedCallback = () => {\n    if(this.props.nextPageToken) {\n      this.props.searchForVideos(this.getSearchQuery(), this.props.nextPageToken, 25);\n    }\n  };\n\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const searchForVideos = searchActions.forVideos.request;\n  return bindActionCreators({searchForVideos}, dispatch);\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    youtubeApiLoaded: getYoutubeLibraryLoaded(state),\n    searchResults: getSearchResults(state, props.location.search),\n    nextPageToken: getSearchNextPageToken(state, props.location.search),\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));\n\n"]},"metadata":{},"sourceType":"module"}