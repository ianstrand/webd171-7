{"ast":null,"code":"import _classCallCheck from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/src/containers/Home/Home.js\";\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport * as videoActions from \"../../store/actions/video\";\nimport './Home.scss';\nimport { SideBar } from '../SideBar/SideBar';\nimport HomeContent from './HomeContent/HomeContent';\nimport { bindActionCreators } from 'redux';\nimport { getYoutubeLibraryLoaded } from '../../store/reducers/api';\nimport { getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded } from '../../store/reducers/videos';\n\nvar Home = /*#__PURE__*/function (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n\n    _this.bottomReachedCallback = function () {\n      if (!_this.props.videoCategoriesLoaded) {\n        return;\n      }\n\n      _this.fetchVideosByCategory();\n    };\n\n    _this.state = {\n      categoryIndex: 0\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(SideBar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(HomeContent, {\n        bottomReachedCallback: this.bottomReachedCallback,\n        showLoader: this.shouldShowLoader(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 9\n        }\n      }));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.youtubeLibraryLoaded) {\n        this.fetchCategoriesAndMostPopularVideos();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n        this.fetchCategoriesAndMostPopularVideos();\n      } else if (this.props.videoCategories !== prevProps.videoCategories) {\n        this.fetchVideosByCategory();\n      }\n    }\n  }, {\n    key: \"fetchVideosByCategory\",\n    value: function fetchVideosByCategory() {\n      var categoryStartIndex = this.state.categoryIndex;\n      var categories = this.props.videoCategories.slice(categoryStartIndex, categoryStartIndex + 3);\n      this.props.fetchMostPopularVideosByCategory(categories);\n      this.setState(function (prevState) {\n        return {\n          categoryIndex: prevState.categoryIndex + 3\n        };\n      });\n    }\n  }, {\n    key: \"fetchCategoriesAndMostPopularVideos\",\n    value: function fetchCategoriesAndMostPopularVideos() {\n      this.props.fetchMostPopularVideos();\n      this.props.fetchVideoCategories();\n    }\n  }, {\n    key: \"shouldShowLoader\",\n    value: function shouldShowLoader() {\n      if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\n        return this.state.categoryIndex < this.props.videoCategories.length;\n      }\n\n      return false;\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nfunction mapStateToProps(state) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    videoCategories: getVideoCategoryIds(state),\n    videoCategoriesLoaded: videoCategoriesLoaded(state),\n    videosByCategoryLoaded: videosByCategoryLoaded(state)\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  var fetchMostPopularVideos = videoActions.mostPopular.request;\n  var fetchVideoCategories = videoActions.categories.request;\n  var fetchMostPopularVideosByCategory = videoActions.mostPopularByCategory.request;\n  return bindActionCreators({\n    fetchMostPopularVideos,\n    fetchVideoCategories,\n    fetchMostPopularVideosByCategory\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/src/containers/Home/Home.js"],"names":["React","connect","videoActions","SideBar","HomeContent","bindActionCreators","getYoutubeLibraryLoaded","getVideoCategoryIds","videoCategoriesLoaded","videosByCategoryLoaded","Home","props","bottomReachedCallback","fetchVideosByCategory","state","categoryIndex","shouldShowLoader","youtubeLibraryLoaded","fetchCategoriesAndMostPopularVideos","prevProps","videoCategories","categoryStartIndex","categories","slice","fetchMostPopularVideosByCategory","setState","prevState","fetchMostPopularVideos","fetchVideoCategories","length","Component","mapStateToProps","mapDispatchToProps","dispatch","mostPopular","request","mostPopularByCategory"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from \"react-redux\";\nimport * as videoActions from \"../../store/actions/video\";\nimport './Home.scss';\nimport {SideBar} from '../SideBar/SideBar';\nimport HomeContent from './HomeContent/HomeContent';\nimport {bindActionCreators} from 'redux';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded} from '../../store/reducers/videos';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categoryIndex: 0,\n    };\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <SideBar/>\n        <HomeContent\n          bottomReachedCallback={this.bottomReachedCallback}\n          showLoader={this.shouldShowLoader()}/>\n      </React.Fragment>\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    } else if (this.props.videoCategories !== prevProps.videoCategories) {\n      this.fetchVideosByCategory();\n    }\n  }\n\n  fetchVideosByCategory() {\n    const categoryStartIndex = this.state.categoryIndex;\n    const categories = this.props.videoCategories.slice(categoryStartIndex, categoryStartIndex + 3);\n    this.props.fetchMostPopularVideosByCategory(categories);\n    this.setState(prevState => {\n      return {\n        categoryIndex: prevState.categoryIndex + 3,\n      };\n    });\n  }\n\n  fetchCategoriesAndMostPopularVideos() {\n    this.props.fetchMostPopularVideos();\n    this.props.fetchVideoCategories();\n  }\n\n  bottomReachedCallback = () => {\n    if (!this.props.videoCategoriesLoaded) {\n      return;\n    }\n    this.fetchVideosByCategory();\n  };\n\n  shouldShowLoader() {\n    if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\n      return this.state.categoryIndex < this.props.videoCategories.length;\n    }\n    return false;\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    videoCategories: getVideoCategoryIds(state),\n    videoCategoriesLoaded: videoCategoriesLoaded(state),\n    videosByCategoryLoaded: videosByCategoryLoaded(state),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\n  const fetchVideoCategories = videoActions.categories.request;\n  const fetchMostPopularVideosByCategory = videoActions.mostPopularByCategory.request;\n  return bindActionCreators({fetchMostPopularVideos, fetchVideoCategories, fetchMostPopularVideosByCategory}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);"]},"metadata":{},"sourceType":"module"}