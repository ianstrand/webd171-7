{"ast":null,"code":"import _classCallCheck from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{bindActionCreators}from'redux';import*as watchActions from'../../store/actions/watch';import{withRouter}from'react-router-dom';import{connect}from'react-redux';import{getYoutubeLibraryLoaded}from'../../store/reducers/api';import WatchContent from'./WatchContent/WatchContent';import{getSearchParam}from'../../services/url';import{getChannelId}from'../../store/reducers/videos';import{getCommentNextPageToken}from'../../store/reducers/comments';import*as commentActions from'../../store/actions/comment';export var Watch=/*#__PURE__*/function(_React$Component){_inherits(Watch,_React$Component);var _super=_createSuper(Watch);function Watch(){var _this;_classCallCheck(this,Watch);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.fetchMoreComments=function(){if(_this.props.nextPageToken){_this.props.fetchCommentThread(_this.getVideoId(),_this.props.nextPageToken);}};return _this;}_createClass(Watch,[{key:\"render\",value:function render(){var videoId=this.getVideoId();return/*#__PURE__*/React.createElement(WatchContent,{videoId:videoId,channelId:this.props.channelId,bottomReachedCallback:this.fetchMoreComments,nextPageToken:this.props.nextPageToken});}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.youtubeLibraryLoaded){this.fetchWatchContent();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.youtubeLibraryLoaded!==prevProps.youtubeLibraryLoaded){this.fetchWatchContent();}}},{key:\"getVideoId\",value:function getVideoId(){return getSearchParam(this.props.location,'v');}},{key:\"fetchWatchContent\",value:function fetchWatchContent(){var videoId=this.getVideoId();if(!videoId){this.props.history.push('/');}this.props.fetchWatchDetails(videoId,this.props.channelId);}}]);return Watch;}(React.Component);function mapStateToProps(state,props){return{youtubeLibraryLoaded:getYoutubeLibraryLoaded(state),channelId:getChannelId(state,props.location,'v'),nextPageToken:getCommentNextPageToken(state,props.location)};}function mapDispatchToProps(dispatch){var fetchWatchDetails=watchActions.details.request;var fetchCommentThread=commentActions.thread.request;return bindActionCreators({fetchWatchDetails,fetchCommentThread},dispatch);}export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Watch));","map":{"version":3,"sources":["/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/src/containers/Watch/Watch.js"],"names":["React","bindActionCreators","watchActions","withRouter","connect","getYoutubeLibraryLoaded","WatchContent","getSearchParam","getChannelId","getCommentNextPageToken","commentActions","Watch","fetchMoreComments","props","nextPageToken","fetchCommentThread","getVideoId","videoId","channelId","youtubeLibraryLoaded","fetchWatchContent","prevProps","location","history","push","fetchWatchDetails","Component","mapStateToProps","state","mapDispatchToProps","dispatch","details","request","thread"],"mappings":"gvBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,kBAAR,KAAiC,OAAjC,CACA,MAAO,GAAKC,CAAAA,YAAZ,KAA8B,2BAA9B,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,uBAAR,KAAsC,0BAAtC,CACA,MAAOC,CAAAA,YAAP,KAAyB,6BAAzB,CACA,OAAQC,cAAR,KAA6B,oBAA7B,CACA,OAAQC,YAAR,KAA2B,6BAA3B,CACA,OAAQC,uBAAR,KAAsC,+BAAtC,CACA,MAAO,GAAKC,CAAAA,cAAZ,KAAgC,6BAAhC,CAGA,UAAaC,CAAAA,KAAb,mUAiCEC,iBAjCF,CAiCsB,UAAM,CACxB,GAAI,MAAKC,KAAL,CAAWC,aAAf,CAA8B,CAC5B,MAAKD,KAAL,CAAWE,kBAAX,CAA8B,MAAKC,UAAL,EAA9B,CAAiD,MAAKH,KAAL,CAAWC,aAA5D,EACD,CACF,CArCH,wEACW,CACP,GAAMG,CAAAA,OAAO,CAAG,KAAKD,UAAL,EAAhB,CACA,mBACE,oBAAC,YAAD,EAAc,OAAO,CAAEC,OAAvB,CAAgC,SAAS,CAAE,KAAKJ,KAAL,CAAWK,SAAtD,CAAiE,qBAAqB,CAAE,KAAKN,iBAA7F,CACc,aAAa,CAAE,KAAKC,KAAL,CAAWC,aADxC,EADF,CAID,CAPH,6DASsB,CAClB,GAAI,KAAKD,KAAL,CAAWM,oBAAf,CAAqC,CACnC,KAAKC,iBAAL,GACD,CACF,CAbH,8DAeqBC,SAfrB,CAegC,CAC5B,GAAI,KAAKR,KAAL,CAAWM,oBAAX,GAAoCE,SAAS,CAACF,oBAAlD,CAAwE,CACtE,KAAKC,iBAAL,GACD,CACF,CAnBH,+CAqBe,CACX,MAAOb,CAAAA,cAAc,CAAC,KAAKM,KAAL,CAAWS,QAAZ,CAAsB,GAAtB,CAArB,CACD,CAvBH,6DAyBsB,CAClB,GAAML,CAAAA,OAAO,CAAG,KAAKD,UAAL,EAAhB,CACA,GAAI,CAACC,OAAL,CAAc,CACZ,KAAKJ,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,CACD,KAAKX,KAAL,CAAWY,iBAAX,CAA6BR,OAA7B,CAAsC,KAAKJ,KAAL,CAAWK,SAAjD,EACD,CA/BH,mBAA2BlB,KAAK,CAAC0B,SAAjC,EAwCA,QAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgCf,KAAhC,CAAuC,CACrC,MAAO,CACLM,oBAAoB,CAAEd,uBAAuB,CAACuB,KAAD,CADxC,CAELV,SAAS,CAAEV,YAAY,CAACoB,KAAD,CAAQf,KAAK,CAACS,QAAd,CAAwB,GAAxB,CAFlB,CAGLR,aAAa,CAAEL,uBAAuB,CAACmB,KAAD,CAAQf,KAAK,CAACS,QAAd,CAHjC,CAAP,CAKD,CAED,QAASO,CAAAA,kBAAT,CAA4BC,QAA5B,CAAsC,CACpC,GAAML,CAAAA,iBAAiB,CAAGvB,YAAY,CAAC6B,OAAb,CAAqBC,OAA/C,CACA,GAAMjB,CAAAA,kBAAkB,CAAGL,cAAc,CAACuB,MAAf,CAAsBD,OAAjD,CACA,MAAO/B,CAAAA,kBAAkB,CAAC,CAACwB,iBAAD,CAAoBV,kBAApB,CAAD,CAA0Ce,QAA1C,CAAzB,CACD,CAED,cAAe3B,CAAAA,UAAU,CAACC,OAAO,CAACuB,eAAD,CAAkBE,kBAAlB,CAAP,CAA6ClB,KAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport {bindActionCreators} from 'redux';\nimport * as watchActions from '../../store/actions/watch';\nimport {withRouter} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport WatchContent from './WatchContent/WatchContent';\nimport {getSearchParam} from '../../services/url';\nimport {getChannelId} from '../../store/reducers/videos';\nimport {getCommentNextPageToken} from '../../store/reducers/comments';\nimport * as commentActions from '../../store/actions/comment';\n\n\nexport class Watch extends React.Component {\n  render() {\n    const videoId = this.getVideoId();\n    return (\n      <WatchContent videoId={videoId} channelId={this.props.channelId} bottomReachedCallback={this.fetchMoreComments}\n                    nextPageToken={this.props.nextPageToken}/>\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.fetchWatchContent();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n      this.fetchWatchContent();\n    }\n  }\n\n  getVideoId() {\n    return getSearchParam(this.props.location, 'v');\n  }\n\n  fetchWatchContent() {\n    const videoId = this.getVideoId();\n    if (!videoId) {\n      this.props.history.push('/');\n    }\n    this.props.fetchWatchDetails(videoId, this.props.channelId);\n  }\n\n  fetchMoreComments = () => {\n    if (this.props.nextPageToken) {\n      this.props.fetchCommentThread(this.getVideoId(), this.props.nextPageToken);\n    }\n  };\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    channelId: getChannelId(state, props.location, 'v'),\n    nextPageToken: getCommentNextPageToken(state, props.location),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchWatchDetails = watchActions.details.request;\n  const fetchCommentThread = commentActions.thread.request;\n  return bindActionCreators({fetchWatchDetails, fetchCommentThread}, dispatch);\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Watch));"]},"metadata":{},"sourceType":"module"}