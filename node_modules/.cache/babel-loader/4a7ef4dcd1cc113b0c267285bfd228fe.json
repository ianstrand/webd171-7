{"ast":null,"code":"import _classCallCheck from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Search.scss';import{getYoutubeLibraryLoaded}from'../../store/reducers/api';import{getSearchNextPageToken,getSearchResults}from'../../store/reducers/search';import*as searchActions from'../../store/actions/search';import{bindActionCreators}from'redux';import{connect}from'react-redux';import{getSearchParam}from'../../services/url';import{VideoList}from'../../components/VideoList/VideoList';import{withRouter}from'react-router-dom';var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);var _super=_createSuper(Search);function Search(){var _this;_classCallCheck(this,Search);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.bottomReachedCallback=function(){if(_this.props.nextPageToken){_this.props.searchForVideos(_this.getSearchQuery(),_this.props.nextPageToken,25);}};return _this;}_createClass(Search,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(VideoList,{bottomReachedCallback:this.bottomReachedCallback,showLoader:true,videos:this.props.searchResults});}},{key:\"getSearchQuery\",value:function getSearchQuery(){return getSearchParam(this.props.location,'search_query');}},{key:\"componentDidMount\",value:function componentDidMount(){if(!this.getSearchQuery()){// redirect to home component if search query is not there\nthis.props.history.push('/webd171-7');}this.searchForVideos();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.youtubeApiLoaded!==this.props.youtubeApiLoaded){this.searchForVideos();}}},{key:\"searchForVideos\",value:function searchForVideos(){var searchQuery=this.getSearchQuery();if(this.props.youtubeApiLoaded){this.props.searchForVideos(searchQuery);}}}]);return Search;}(React.Component);function mapDispatchToProps(dispatch){var searchForVideos=searchActions.forVideos.request;return bindActionCreators({searchForVideos},dispatch);}function mapStateToProps(state,props){return{youtubeApiLoaded:getYoutubeLibraryLoaded(state),searchResults:getSearchResults(state,props.location.search),nextPageToken:getSearchNextPageToken(state,props.location.search)};}export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Search));","map":{"version":3,"sources":["/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/src/containers/Search/Search.js"],"names":["React","getYoutubeLibraryLoaded","getSearchNextPageToken","getSearchResults","searchActions","bindActionCreators","connect","getSearchParam","VideoList","withRouter","Search","bottomReachedCallback","props","nextPageToken","searchForVideos","getSearchQuery","searchResults","location","history","push","prevProps","youtubeApiLoaded","searchQuery","Component","mapDispatchToProps","dispatch","forVideos","request","mapStateToProps","state","search"],"mappings":"gvBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,eAAP,CACA,OAAQC,uBAAR,KAAsC,0BAAtC,CACA,OAAQC,sBAAR,CAAgCC,gBAAhC,KAAuD,6BAAvD,CACA,MAAO,GAAKC,CAAAA,aAAZ,KAA+B,4BAA/B,CACA,OAAQC,kBAAR,KAAiC,OAAjC,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,cAAR,KAA6B,oBAA7B,CACA,OAAQC,SAAR,KAAwB,sCAAxB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,C,GAEMC,CAAAA,M,uUAiCJC,qB,CAAwB,UAAM,CAC5B,GAAG,MAAKC,KAAL,CAAWC,aAAd,CAA6B,CAC3B,MAAKD,KAAL,CAAWE,eAAX,CAA2B,MAAKC,cAAL,EAA3B,CAAkD,MAAKH,KAAL,CAAWC,aAA7D,CAA4E,EAA5E,EACD,CACF,C,yEApCQ,CACP,mBAAQ,oBAAC,SAAD,EACN,qBAAqB,CAAE,KAAKF,qBADtB,CAEN,UAAU,CAAE,IAFN,CAGN,MAAM,CAAE,KAAKC,KAAL,CAAWI,aAHb,EAAR,CAID,C,uDAEgB,CACf,MAAOT,CAAAA,cAAc,CAAC,KAAKK,KAAL,CAAWK,QAAZ,CAAsB,cAAtB,CAArB,CACD,C,6DAEmB,CAClB,GAAI,CAAC,KAAKF,cAAL,EAAL,CAA4B,CAC1B;AACA,KAAKH,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB,EACD,CACD,KAAKL,eAAL,GACD,C,8DAEkBM,S,CAAW,CAC5B,GAAIA,SAAS,CAACC,gBAAV,GAA+B,KAAKT,KAAL,CAAWS,gBAA9C,CAAgE,CAC9D,KAAKP,eAAL,GACD,CACF,C,yDAEiB,CAChB,GAAMQ,CAAAA,WAAW,CAAG,KAAKP,cAAL,EAApB,CACA,GAAI,KAAKH,KAAL,CAAWS,gBAAf,CAAiC,CAC/B,KAAKT,KAAL,CAAWE,eAAX,CAA2BQ,WAA3B,EACD,CACF,C,oBA/BkBtB,KAAK,CAACuB,S,EA0C3B,QAASC,CAAAA,kBAAT,CAA4BC,QAA5B,CAAsC,CACpC,GAAMX,CAAAA,eAAe,CAAGV,aAAa,CAACsB,SAAd,CAAwBC,OAAhD,CACA,MAAOtB,CAAAA,kBAAkB,CAAC,CAACS,eAAD,CAAD,CAAoBW,QAApB,CAAzB,CACD,CAED,QAASG,CAAAA,eAAT,CAAyBC,KAAzB,CAAgCjB,KAAhC,CAAuC,CACrC,MAAO,CACLS,gBAAgB,CAAEpB,uBAAuB,CAAC4B,KAAD,CADpC,CAELb,aAAa,CAAEb,gBAAgB,CAAC0B,KAAD,CAAQjB,KAAK,CAACK,QAAN,CAAea,MAAvB,CAF1B,CAGLjB,aAAa,CAAEX,sBAAsB,CAAC2B,KAAD,CAAQjB,KAAK,CAACK,QAAN,CAAea,MAAvB,CAHhC,CAAP,CAKD,CAED,cAAerB,CAAAA,UAAU,CAACH,OAAO,CAACsB,eAAD,CAAkBJ,kBAAlB,CAAP,CAA6Cd,MAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport './Search.scss';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {getSearchNextPageToken, getSearchResults} from '../../store/reducers/search';\nimport * as searchActions from '../../store/actions/search';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {getSearchParam} from '../../services/url';\nimport {VideoList} from '../../components/VideoList/VideoList';\nimport {withRouter} from 'react-router-dom';\n\nclass Search extends React.Component {\n  render() {\n    return (<VideoList\n      bottomReachedCallback={this.bottomReachedCallback}\n      showLoader={true}\n      videos={this.props.searchResults}/>);\n  }\n\n  getSearchQuery() {\n    return getSearchParam(this.props.location, 'search_query');\n  }\n\n  componentDidMount() {\n    if (!this.getSearchQuery()) {\n      // redirect to home component if search query is not there\n      this.props.history.push('/webd171-7');\n    }\n    this.searchForVideos();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.youtubeApiLoaded !== this.props.youtubeApiLoaded) {\n      this.searchForVideos();\n    }\n  }\n\n  searchForVideos() {\n    const searchQuery = this.getSearchQuery();\n    if (this.props.youtubeApiLoaded) {\n      this.props.searchForVideos(searchQuery);\n    }\n  }\n\n  bottomReachedCallback = () => {\n    if(this.props.nextPageToken) {\n      this.props.searchForVideos(this.getSearchQuery(), this.props.nextPageToken, 25);\n    }\n  };\n\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const searchForVideos = searchActions.forVideos.request;\n  return bindActionCreators({searchForVideos}, dispatch);\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    youtubeApiLoaded: getYoutubeLibraryLoaded(state),\n    searchResults: getSearchResults(state, props.location.search),\n    nextPageToken: getSearchNextPageToken(state, props.location.search),\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));\n\n"]},"metadata":{},"sourceType":"module"}