{"ast":null,"code":"import _classCallCheck from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from\"react-redux\";import*as videoActions from\"../../store/actions/video\";import'./Home.scss';import{SideBar}from'../SideBar/SideBar';import HomeContent from'./HomeContent/HomeContent';import{bindActionCreators}from'redux';import{getYoutubeLibraryLoaded}from'../../store/reducers/api';import{getVideoCategoryIds,videoCategoriesLoaded,videosByCategoryLoaded}from'../../store/reducers/videos';var Home=/*#__PURE__*/function(_React$Component){_inherits(Home,_React$Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.bottomReachedCallback=function(){if(!_this.props.videoCategoriesLoaded){return;}_this.fetchVideosByCategory();};_this.state={categoryIndex:0};return _this;}_createClass(Home,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(SideBar,null),/*#__PURE__*/React.createElement(HomeContent,{bottomReachedCallback:this.bottomReachedCallback,showLoader:this.shouldShowLoader()}));}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.youtubeLibraryLoaded){this.fetchCategoriesAndMostPopularVideos();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.youtubeLibraryLoaded!==prevProps.youtubeLibraryLoaded){this.fetchCategoriesAndMostPopularVideos();}else if(this.props.videoCategories!==prevProps.videoCategories){this.fetchVideosByCategory();}}},{key:\"fetchVideosByCategory\",value:function fetchVideosByCategory(){var categoryStartIndex=this.state.categoryIndex;var categories=this.props.videoCategories.slice(categoryStartIndex,categoryStartIndex+3);this.props.fetchMostPopularVideosByCategory(categories);this.setState(function(prevState){return{categoryIndex:prevState.categoryIndex+3};});}},{key:\"fetchCategoriesAndMostPopularVideos\",value:function fetchCategoriesAndMostPopularVideos(){this.props.fetchMostPopularVideos();this.props.fetchVideoCategories();}},{key:\"shouldShowLoader\",value:function shouldShowLoader(){if(this.props.videoCategoriesLoaded&&this.props.videosByCategoryLoaded){return this.state.categoryIndex<this.props.videoCategories.length;}return false;}}]);return Home;}(React.Component);function mapStateToProps(state){return{youtubeLibraryLoaded:getYoutubeLibraryLoaded(state),videoCategories:getVideoCategoryIds(state),videoCategoriesLoaded:videoCategoriesLoaded(state),videosByCategoryLoaded:videosByCategoryLoaded(state)};}function mapDispatchToProps(dispatch){var fetchMostPopularVideos=videoActions.mostPopular.request;var fetchVideoCategories=videoActions.categories.request;var fetchMostPopularVideosByCategory=videoActions.mostPopularByCategory.request;return bindActionCreators({fetchMostPopularVideos,fetchVideoCategories,fetchMostPopularVideosByCategory},dispatch);}export default connect(mapStateToProps,mapDispatchToProps)(Home);","map":{"version":3,"sources":["/Users/ianstrand/Sites/strandian/strand/SDCCD/webd171/lessons/7/webd171-7/src/containers/Home/Home.js"],"names":["React","connect","videoActions","SideBar","HomeContent","bindActionCreators","getYoutubeLibraryLoaded","getVideoCategoryIds","videoCategoriesLoaded","videosByCategoryLoaded","Home","props","bottomReachedCallback","fetchVideosByCategory","state","categoryIndex","shouldShowLoader","youtubeLibraryLoaded","fetchCategoriesAndMostPopularVideos","prevProps","videoCategories","categoryStartIndex","categories","slice","fetchMostPopularVideosByCategory","setState","prevState","fetchMostPopularVideos","fetchVideoCategories","length","Component","mapStateToProps","mapDispatchToProps","dispatch","mostPopular","request","mostPopularByCategory"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from \"react-redux\";\nimport * as videoActions from \"../../store/actions/video\";\nimport './Home.scss';\nimport {SideBar} from '../SideBar/SideBar';\nimport HomeContent from './HomeContent/HomeContent';\nimport {bindActionCreators} from 'redux';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded} from '../../store/reducers/videos';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categoryIndex: 0,\n    };\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <SideBar/>\n        <HomeContent\n          bottomReachedCallback={this.bottomReachedCallback}\n          showLoader={this.shouldShowLoader()}/>\n      </React.Fragment>\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    } else if (this.props.videoCategories !== prevProps.videoCategories) {\n      this.fetchVideosByCategory();\n    }\n  }\n\n  fetchVideosByCategory() {\n    const categoryStartIndex = this.state.categoryIndex;\n    const categories = this.props.videoCategories.slice(categoryStartIndex, categoryStartIndex + 3);\n    this.props.fetchMostPopularVideosByCategory(categories);\n    this.setState(prevState => {\n      return {\n        categoryIndex: prevState.categoryIndex + 3,\n      };\n    });\n  }\n\n  fetchCategoriesAndMostPopularVideos() {\n    this.props.fetchMostPopularVideos();\n    this.props.fetchVideoCategories();\n  }\n\n  bottomReachedCallback = () => {\n    if (!this.props.videoCategoriesLoaded) {\n      return;\n    }\n    this.fetchVideosByCategory();\n  };\n\n  shouldShowLoader() {\n    if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\n      return this.state.categoryIndex < this.props.videoCategories.length;\n    }\n    return false;\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    videoCategories: getVideoCategoryIds(state),\n    videoCategoriesLoaded: videoCategoriesLoaded(state),\n    videosByCategoryLoaded: videosByCategoryLoaded(state),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\n  const fetchVideoCategories = videoActions.categories.request;\n  const fetchMostPopularVideosByCategory = videoActions.mostPopularByCategory.request;\n  return bindActionCreators({fetchMostPopularVideos, fetchVideoCategories, fetchMostPopularVideosByCategory}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);"]},"metadata":{},"sourceType":"module"}